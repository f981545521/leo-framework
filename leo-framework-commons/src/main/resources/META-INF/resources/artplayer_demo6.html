<html>
<head>
    <title>ArtPlayer Demo</title>
    <meta name="referrer" content="never">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
    <link rel="dns-prefetch" href="//yanxuan.nosdn.127.net" />
    <link rel="preconnect" href="//yanxuan.nosdn.127.net" crossorigin>

    <meta charset="UTF-8"/>
    <style>
        html, body {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
            border: 0;
            overflow: hidden
        }

        .favnow {
            width: 100%;
            height: 100%;
            background: #000
        }



    </style>
</head>
<body>
<div class="favnow"></div>


<script src="artplayer.hls.min.js"></script>
<script src="artplayer.js"></script>
<script src="artplayer-plugin-danmuku.js"></script>

<script>

    var options = {
        container: '.favnow',
        //url: 'http://qiniu.acyou.cn/video/20240617142317%40%E6%95%99%E4%BD%A0%E6%80%8E%E4%B9%88%E6%B7%B7%E7%A4%BE%E4%BC%9A03%E4%B8%AD%E5%9B%BD%E6%9C%80%E7%9C%9F%E5%AE%9E%E7%9A%84%E7%A4%BE%E4%BA%A4%E5%85%B3%E7%B3%BB.mp4',
        url:'https://s6.bfengbf.com/video/lianhualou/ç¬¬01é›†/index.m3u8',
        type: 'm3u8',
        volume: 1,//æ’­æ”¾å™¨çš„é»˜è®¤éŸ³é‡
        isLive: false,//ä½¿ç”¨ç›´æ’­æ¨¡å¼ï¼Œä¼šéšè—è¿›åº¦æ¡å’Œæ’­æ”¾æ—¶é—´
        muted: false, //æ˜¯å¦é»˜è®¤é™éŸ³
        autoplay: false,//æ˜¯å¦è‡ªåŠ¨æ’­æ”¾
        autoSize: false,
        autoMini: false,//å½“æ’­æ”¾å™¨æ»šåŠ¨åˆ°æµè§ˆå™¨è§†å£ä»¥å¤–æ—¶ï¼Œè‡ªåŠ¨è¿›å…¥ è¿·ä½ æ’­æ”¾ æ¨¡å¼

        //è®¾ç½®é¢æ¿ï¼Œç„¶åè‡ªå¸¦å››ä¸ªå†…ç½®é¡¹ï¼šflip, playbackRate, aspectRatio, subtitleOffset
        setting: true,
        flip: true,//æ˜¯å¦æ˜¾ç¤ºè§†é¢‘ç¿»è½¬åŠŸèƒ½ï¼Œç›®å‰åªå‡ºç°åœ¨ è®¾ç½®é¢æ¿ å’Œ å³é”®èœå• é‡Œ
        aspectRatio: true,//æ˜¯å¦æ˜¾ç¤ºè§†é¢‘é•¿å®½æ¯”åŠŸèƒ½ï¼Œä¼šå‡ºç°åœ¨ è®¾ç½®é¢æ¿ å’Œ å³é”®èœå• é‡Œ
        playbackRate: true,//æ˜¯å¦æ˜¾ç¤ºè§†é¢‘æ’­æ”¾é€Ÿåº¦åŠŸèƒ½ï¼Œä¼šå‡ºç°åœ¨ è®¾ç½®é¢æ¿ å’Œ å³é”®èœå• é‡Œ
        subtitleOffset: true,//å­—å¹•æ—¶é—´åç§»ï¼ŒèŒƒå›´åœ¨ [-5s, 5s]ï¼Œå‡ºç°åœ¨ è®¾ç½®é¢æ¿ é‡Œ

        loop: false,//æ˜¯å¦å¾ªç¯æ’­æ”¾
        screenshot: true,//æ˜¯å¦åœ¨åº•éƒ¨æ§åˆ¶æ é‡Œæ˜¾ç¤º è§†é¢‘æˆªå›¾ åŠŸèƒ½
        pip: true,//æ˜¯å¦åœ¨åº•éƒ¨æ§åˆ¶æ é‡Œæ˜¾ç¤º ç”»ä¸­ç”» çš„å¼€å…³æŒ‰é’®
        fullscreen: true,//æ˜¯å¦åœ¨åº•éƒ¨æ§åˆ¶æ é‡Œæ˜¾ç¤ºæ’­æ”¾å™¨ çª—å£å…¨å± æŒ‰é’®
        fullscreenWeb: true,//æ˜¯å¦åœ¨åº•éƒ¨æ§åˆ¶æ é‡Œæ˜¾ç¤ºæ’­æ”¾å™¨ ç½‘é¡µå…¨å± æŒ‰é’®

        playbackRateList: [.5, 1, 1.5, 2, 2.5, 3],
        miniProgressBar: true,//è¿·ä½ è¿›åº¦æ¡ï¼Œåªåœ¨æ’­æ”¾å™¨å¤±å»ç„¦ç‚¹åä¸”æ­£åœ¨æ’­æ”¾æ—¶å‡ºç°

        mutex: true,//å‡å¦‚é¡µé¢é‡ŒåŒæ—¶å­˜åœ¨å¤šä¸ªæ’­æ”¾å™¨ï¼Œæ˜¯å¦åªèƒ½è®©ä¸€ä¸ªæ’­æ”¾å™¨æ’­æ”¾
        hotkey: true,//æ˜¯å¦ä½¿ç”¨å¿«æ·é”®
        backdrop: true,
        playsInline: true,
        autoPlayback: true,
        airplay: true,
        theme: '#FF9900',
        cssVar: {},
        fastForward: true,
        layers: [

        ],
        videoTitle: "ã€Šè²èŠ±æ¥¼ ç¬¬01é›†ã€‹",
        plugins: [
            episodesListPlugin(),
            //videoTitlePlugin("ã€Šæˆ‘æ˜¯æ­Œæ‰‹2024 ç¬¬ä¸€æœŸã€‹")
            //https://artplayer.org/document/plugin/danmuku.html#%E5%85%A8%E9%83%A8%E9%80%89%E9%A1%B9
            artplayerPluginDanmuku({
                speed: 10, // å¼¹å¹•æŒç»­æ—¶é—´ï¼ŒèŒƒå›´åœ¨[1 ~ 10]
                danmuku: [
                    {
                        text: 'ğŸ’¥1æ¡å¼¹å¹•åˆ—é˜Ÿæ¥è¢­~åšå¥½å‡†å¤‡å§ï¼',
                        time: 2
                    },
                    {
                        text: 'è¯·å¤§å®¶éµå®ˆå¼¹å¹•ç¤¼ä»ªï¼Œæ–‡æ˜å‘é€å¼¹å¹•ï¼',
                        time: 2.5
                    },
                    {
                        text: '<div>ä½ å¥½</div>',
                        time: 5
                    }
                ],
            })
        ]
    };
    const art = new Artplayer(options);


    function episodesListPlugin(){
        return (art) => {
            art.controls.add(            {
                name: 'select-episodes',
                index: 5,
                position: 'right',
                html: 'é€‰é›†',
                style: {

                },
                click: function (item, $dom) {
                    var display = art.layers['episodes-list'].style.display;
                    if (display && "none" === display) {
                        art.layers['episodes-list'].style.display = 'block'
                    }else {
                        art.layers['episodes-list'].style.display = 'none'
                    }
                    return 'é€‰é›†';
                },
                mounted: ($control)=>{
                    //console.info($control);
                }
            });

            art.layers.add(            {
                name: 'episodes-list',
                html: `<div class="yxq-listbox yxq-stting" style="padding: 10px">
    <div class="anthology-wrap">
        <div class="video-list-cl"><a style="color:#ffffff;cursor:pointer;"
                                      onclick="javascript:art.layers['episodes-list'].style.display = 'none'"
                                      title="ç‚¹å‡»å…³é—­">âœ–</a></div>
        <div class="normal-title-wrap">
            <div class="pic-text-item"><a>
                <div class="cover"><img class="bj"
                                        src="https://pic9.iqiyipic.com/image/20231110/e5/43/a_100517696_m_601_m33_579_772.webp">
                </div>
                <div class="anthology-title-wrap">
                    <div class="title">è²èŠ±æ¥¼</div>
                    <div class="subtitle" style="max-height: 36px;"></div>
                    <div class="subtitle" style="max-height: 36px;"></div>
                    <div class="subtitle">å›½äº§,æƒ…,æ‚¬ç–‘,æ­¦ä¾ ,å¤è£…,å†…åœ°,å¤§é™†,è¿ç»­,ç”µè§†,æ™®é€šè¯</div>
                    <div class="subtitle" style="max-height: 36px;">å¯¼æ¼”ï¼šæœªçŸ¥</div>
                    <div class="subtitle">ä¸»æ¼”ï¼šæˆæ¯…,æ›¾èˆœæ™,è‚–é¡ºå°§,é™ˆéƒ½çµ,ç‹é¹¤æ¶¦,é™ˆæ„æ¶µ,å¾ç™¾æ…§</div>
                </div>
            </a></div>
            <div class="title-info"></div>
        </div>
        <div class="scroll-area" id="listBox"><a class="component-title"><span
                style="font-size:12px">å·²å®Œç»“</span></a>
            <div class="yxq-selset-list anthology-content yxq-show" id="listShow">
                <a style="cursor:pointer;color: #CC6633;" onclick="javascript:art.plugins['select-episodes'].selectItem()"                  class="box-item album-title active"    title="ç¬¬01é›†">ç¬¬01é›†</a>
                <a style="cursor:pointer;"                onclick="javascript:art.plugins['select-episodes'].selectItem()"  class="box-item album-title"    title="ç¬¬02é›†">ç¬¬02é›†</a>
                <a style="cursor:pointer;"                onclick="javascript:art.plugins['select-episodes'].selectItem()"  class="box-item album-title"    title="ç¬¬03é›†">ç¬¬03é›†</a>

            </div>
        </div>
    </div>
</div>`,
                style: {
                    display: "none"
                },
                mounted: function ($el) {
                    console.info(2, $el);
                },
            },);


            function show() {
                art.layers['episodes-list'].style.display = 'block';
            }

            function hide() {
                art.layers['episodes-list'].style.display = 'none';
            }

            function selectItem(t) {
                console.info(3, t);
            }


            return {
                name: 'select-episodes',
                show,
                hide,
                selectItem
            };
        }
    }

/*    function videoTitlePlugin(title) {
        return (art) => {
            art.layers.add(            {
                name: 'videoTitle',
                html: `<div class="video-title">${title}</div>`,
                style: {

                },
                click: function (...args) {
                    //console.info('click', args);
                },
                mounted: function (...args) {
                    //console.info('mounted', args);
                },
            });

            function show() {
                art.layers.videoTitle.style.display = 'block';
            }

            function hide() {
                art.layers.videoTitle.style.display = 'none';
            }

            //art.on('play', hide);
            //art.on('pause', show);

            art.on('control', (state) => {
                if (state) {
                    show()
                }else {
                    hide()
                }
            });

            return {
                name: 'videoTitlePlugin',
                show,
                hide
            };
        }
    }*/

    //const longPressDuration = 500;
    //var beforeTime = new Date().getTime();
    //var keyStatus = 0;
    //var before_playbackRate = 0;
    //document.addEventListener('keydown', function (event) {
    //    if (event.keyCode === 39) {
    //        if (keyStatus === 1) {
    //            //console.log("é•¿æŒ‰è§¦å‘");
    //            if (before_playbackRate === 0) {
    //                before_playbackRate = art.playbackRate;
    //            }
    //            art.playbackRate = 3;
    //        } else {
    //            keyStatus = 1;
    //            beforeTime = new Date().getTime();
    //        }
    //    }
//
    //});
//
    //document.addEventListener('keyup', function (event) {
    //    if (event.keyCode === 39) {
    //        var now = new Date().getTime();
    //        if ((now - beforeTime) < longPressDuration) {
    //            //console.log("çŸ­æŒ‰å¼¹èµ·", event)
    //            art.forward = 5;
    //        }else {
    //            //console.log("é•¿æŒ‰å¼¹èµ·", event)
    //            art.playbackRate = before_playbackRate;
    //            before_playbackRate = 0;
    //        }
    //        keyStatus = 0;
    //    }
    //});



    //art.on('video:ratechange', () => {
    //    console.info('video:ratechange');
    //});

    //art.on('hotkey', (event) => {
    //    if (event.keyCode === 39) {
    //        var now = new Date().getTime();
    //        if ((now - beforeTime) < longPressDuration) {
    //            console.log("é•¿æŒ‰")
    //        }else {
    //            console.info('hotkey', event, 'æ—¶é—´',new Date().getTime());
    //        }
    //        beforeTime = now;
    //    }
    //});

    //art.on('ready', () => {
    //    console.info(art.playbackRate);
    //    art.playbackRate = 2;
    //    console.info(art.playbackRate);
    //});
</script>
</body>
</html>