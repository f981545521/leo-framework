<html>
<head>
    <title>ArtPlayer Demo</title>
    <meta name="referrer" content="never">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Access-Control-Allow-Credentials" content="*"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
    <link rel="dns-prefetch" href="//yanxuan.nosdn.127.net" />
    <link rel="preconnect" href="//yanxuan.nosdn.127.net" crossorigin>

    <meta charset="UTF-8"/>
    <style>
        html, body {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
            border: 0;
            overflow: hidden
        }

        .favnow {
            width: 100%;
            height: 100%;
            background: #000
        }



    </style>
</head>
<body>
<div class="favnow"></div>


<script src="artplayer.hls.min.js"></script>
<script src="artplayer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-danmuku/dist/artplayer-plugin-danmuku.js"></script>

<script>

    var options = {
        container: '.favnow',
        //url: 'http://qiniu.acyou.cn/video/20240617142317%40%E6%95%99%E4%BD%A0%E6%80%8E%E4%B9%88%E6%B7%B7%E7%A4%BE%E4%BC%9A03%E4%B8%AD%E5%9B%BD%E6%9C%80%E7%9C%9F%E5%AE%9E%E7%9A%84%E7%A4%BE%E4%BA%A4%E5%85%B3%E7%B3%BB.mp4',
        url:'https://v.cdnlz18.com/20240525/12894_cd48fcdd/index.m3u8',
        type: 'm3u8',
        volume: 1,//播放器的默认音量
        isLive: false,//使用直播模式，会隐藏进度条和播放时间
        muted: false, //是否默认静音
        autoplay: false,//是否自动播放
        autoSize: false,
        autoMini: false,//当播放器滚动到浏览器视口以外时，自动进入 迷你播放 模式

        //设置面板，然后自带四个内置项：flip, playbackRate, aspectRatio, subtitleOffset
        setting: true,
        flip: true,//是否显示视频翻转功能，目前只出现在 设置面板 和 右键菜单 里
        aspectRatio: true,//是否显示视频长宽比功能，会出现在 设置面板 和 右键菜单 里
        playbackRate: true,//是否显示视频播放速度功能，会出现在 设置面板 和 右键菜单 里
        subtitleOffset: true,//字幕时间偏移，范围在 [-5s, 5s]，出现在 设置面板 里

        loop: false,//是否循环播放
        screenshot: true,//是否在底部控制栏里显示 视频截图 功能
        pip: true,//是否在底部控制栏里显示 画中画 的开关按钮
        fullscreen: true,//是否在底部控制栏里显示播放器 窗口全屏 按钮
        fullscreenWeb: true,//是否在底部控制栏里显示播放器 网页全屏 按钮

        playbackRateList: [.5, 1, 1.5, 2, 2.5, 3],
        miniProgressBar: true,//迷你进度条，只在播放器失去焦点后且正在播放时出现

        mutex: true,//假如页面里同时存在多个播放器，是否只能让一个播放器播放
        hotkey: true,//是否使用快捷键
        backdrop: true,
        playsInline: true,
        autoPlayback: true,
        airplay: true,
        theme: '#d0ae24',
        cssVar: {},
        fastForward: true,
        layers: [

        ],
        videoTitle: "《我是歌手2024 第一期》",
        plugins: [
            //videoTitlePlugin("《我是歌手2024 第一期》")
            //https://artplayer.org/document/plugin/danmuku.html#%E5%85%A8%E9%83%A8%E9%80%89%E9%A1%B9
            artplayerPluginDanmuku({
                // 以下为非必填
                speed: 10, // 弹幕持续时间，范围在[1 ~ 10]
                margin: [10, '25%'], // 弹幕上下边距，支持像素数字和百分比
                opacity: 1, // 弹幕透明度，范围在[0 ~ 1]
                color: '#FFFFFF', // 默认弹幕颜色，可以被单独弹幕项覆盖
                mode: 0, // 默认弹幕模式: 0: 滚动，1: 顶部，2: 底部
                modes: [0, 1, 2], // 弹幕可见的模式
                fontSize: 25, // 弹幕字体大小，支持像素数字和百分比
                antiOverlap: true, // 弹幕是否防重叠
                synchronousPlayback: false, // 是否同步播放速度
                mount: undefined, // 弹幕发射器挂载点, 默认为播放器控制栏中部
                heatmap: true, // 是否开启热力图
                width: 512, // 当播放器宽度小于此值时，弹幕发射器置于播放器底部
                points: [], // 热力图数据
                filter: (danmu) => danmu.text.length <= 100, // 弹幕载入前的过滤器
                beforeVisible: () => true, // 弹幕显示前的过滤器，返回 true 则可以发送
                visible: true, // 弹幕层是否可见
                emitter: true, // 是否开启弹幕发射器
                maxLength: 200, // 弹幕输入框最大长度, 范围在[1 ~ 1000]
                lockTime: 5, // 输入框锁定时间，范围在[1 ~ 60]
                theme: 'dark', // 弹幕主题，支持 dark 和 light，只在自定义挂载时生效
                OPACITY: {}, // 不透明度配置项
                FONT_SIZE: {}, // 弹幕字号配置项
                MARGIN: {}, // 显示区域配置项
                SPEED: {}, // 弹幕速度配置项
                COLOR: [], // 颜色列表配置项
                danmuku: [
                    {
                        text: '💥1条弹幕列队来袭~做好准备吧！',
                        time: 2
                    },
                    {
                        text: '请大家遵守弹幕礼仪，文明发送弹幕！',
                        time: 2.5
                    },
                    {
                        text: '<div>你好</div>',
                        time: 5
                    }
                ],
            })
        ]
    };
    const art = new Artplayer(options);



/*    function videoTitlePlugin(title) {
        return (art) => {
            art.layers.add(            {
                name: 'videoTitle',
                html: `<div class="video-title">${title}</div>`,
                style: {

                },
                click: function (...args) {
                    //console.info('click', args);
                },
                mounted: function (...args) {
                    //console.info('mounted', args);
                },
            });

            function show() {
                art.layers.videoTitle.style.display = 'block';
            }

            function hide() {
                art.layers.videoTitle.style.display = 'none';
            }

            //art.on('play', hide);
            //art.on('pause', show);

            art.on('control', (state) => {
                if (state) {
                    show()
                }else {
                    hide()
                }
            });

            return {
                name: 'videoTitlePlugin',
                show,
                hide
            };
        }
    }*/

    //const longPressDuration = 500;
    //var beforeTime = new Date().getTime();
    //var keyStatus = 0;
    //var before_playbackRate = 0;
    //document.addEventListener('keydown', function (event) {
    //    if (event.keyCode === 39) {
    //        if (keyStatus === 1) {
    //            //console.log("长按触发");
    //            if (before_playbackRate === 0) {
    //                before_playbackRate = art.playbackRate;
    //            }
    //            art.playbackRate = 3;
    //        } else {
    //            keyStatus = 1;
    //            beforeTime = new Date().getTime();
    //        }
    //    }
//
    //});
//
    //document.addEventListener('keyup', function (event) {
    //    if (event.keyCode === 39) {
    //        var now = new Date().getTime();
    //        if ((now - beforeTime) < longPressDuration) {
    //            //console.log("短按弹起", event)
    //            art.forward = 5;
    //        }else {
    //            //console.log("长按弹起", event)
    //            art.playbackRate = before_playbackRate;
    //            before_playbackRate = 0;
    //        }
    //        keyStatus = 0;
    //    }
    //});



    //art.on('video:ratechange', () => {
    //    console.info('video:ratechange');
    //});

    //art.on('hotkey', (event) => {
    //    if (event.keyCode === 39) {
    //        var now = new Date().getTime();
    //        if ((now - beforeTime) < longPressDuration) {
    //            console.log("长按")
    //        }else {
    //            console.info('hotkey', event, '时间',new Date().getTime());
    //        }
    //        beforeTime = now;
    //    }
    //});

    //art.on('ready', () => {
    //    console.info(art.playbackRate);
    //    art.playbackRate = 2;
    //    console.info(art.playbackRate);
    //});
</script>
</body>
</html>